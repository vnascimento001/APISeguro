<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <meta charset="UTF-8">
    <title>Seguro API</title>

    <style>
        html, body {
            font-size: 1.15rem;
            color: white;
            background: linear-gradient(270deg, rgba(112,206,238,1) 9%, rgba(57,147,93,1) 88%);
        }

        .container {
            width: 100%;
            padding-right: 15px;
            padding-left: 15px;
            margin-top: 10rem;
            margin-right: auto;
            margin-left: auto;
        }

        h2{
            margin-left: 1rem;
        }

        button {
            width: 300px;
            margin: 5px;
        }

        a {
            color: inherit;
            text-decoration: none
        }
        a:hover {
            color: inherit;
            text-decoration: none
        }
    </style>

</head>
<body>
<div>
    <h2><a href="/">SeguroAPI</a></h2>
</div>



<div class="container py-5">
    <div class="row">
        <div class="col-md-10 mx-auto">
            <form method="post">
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="nome">Nome</label>
                        <input type="text" value="" name="nome" required class="form-control" id="nome"/>
                    </div>
                    <div class="col-sm-6">
                        <label for="cpf">CPF</label>
                        <input type="text" value="" name="cpf" id="cpf" class="form-control" onkeypress="$(this).mask('000.000.000-00');" required />
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-3">
                        <label for="dt">Data</label>
                        <input type="date" min='1921-01-01' id="dt" name="data" class=" form-control"/>
                    </div>
                    <div class="col-sm-3">
                        <label>Sexo</label>
                        <select class="form-control" aria-label="Default select" name="sexo">
                            <option selected value="M">Masculino</option>
                            <option value="F">Feminino</option>
                        </select>
                    </div>
                    <div class="col-sm-6">
                        <label for="veiculo">Veículo</label>
                        <input type="text" value="" id="veiculo" name="veiculo" class="form-control" required/>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="valor">Valor</label>
                        <input type="number" value="" id="valor" name="valor" min="1" class="form-control" required/>
                    </div>
                    <div class="col-sm-6">
                        <label for="parcelas">Parcelas</label>
                        <select class="form-control" aria-label="Default select example" id="parcelas" name="parcelas">
                            <option selected value=1>01x | Sem acréscimo</option>
                            <option value=2>02x | Sem acréscimo</option>
                            <option value=3>03x | Sem acréscimo</option>
                            <option value=4>04x | Sem acréscimo</option>
                            <option value=5>05x | Sem acréscimo</option>
                            <option value=6>06x | 3% em cima do valor do seguro</option>
                            <option value=7>07x | 3% em cima do valor do seguro</option>
                            <option value=8>08x | 3% em cima do valor do seguro</option>
                            <option value=9>09x | 3% em cima do valor do seguro</option>
                            <option value=10>10x | 5% em cima do valor do seguro</option>
                            <option value=11>11x | 5% em cima do valor do seguro</option>
                            <option value=12>12x | 5% em cima do valor do seguro</option>
                        </select>
                    </div>
                </div>
                <button type="submit" value="validar" class="btn btn-success float-right"> Calcular seguro  </button>
            </form>
        </div>
    </div>
</div>
<script>
    document.getElementById('dt').max = new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000).toISOString().split("T")[0];
</script>

<script>
    const inputNasc = document.getElementById("dt");

    document.querySelector("form").addEventListener("submit", function(){
        let nasc = inputNasc.value.split("-").map(Number);
        let depois18Anos = new Date(nasc[0] + 18, nasc[1] - 1, nasc[2]);
        let agora = new Date();

        if (depois18Anos <= agora){
            console.log("Maior de 18");
        }
        else {
            alert("Menor de 18");
            event.preventDefault();
        }

    });
</script>

</body>
</html>